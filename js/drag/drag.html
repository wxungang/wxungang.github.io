<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>drag</title>
    <style type="text/css" rel="stylesheet">
        * {
            margin: 0;
            padding: 0;
        }

        body {
            text-align: center;
        }

        .drag p {
            line-height: 45px;
            margin-top: 10px;
            border: solid 1px #004974;

        }

    </style>
</head>
<body>
<header>drag API</header>
<div id="drag" class="drag">
    <p draggable="true">drag 1</p>
    <p draggable="true">drag 2</p>
    <p draggable="true">drag 3</p>
    <p draggable="true">drag 4</p>
    <p draggable="true">drag 5</p>
    <p draggable="true">drag 6</p>
</div>
</body>
<script type="text/javascript">
    //    DataTransfer 对象：退拽对象用来传递的媒介，使用一般为Event.dataTransfer。
    //    draggable 属性：就是标签元素要设置draggable=true，否则不会有效果，例如：
    //    <div title="拖拽我" draggable="true">列表1</div>
    //    ondragstart 事件：当拖拽元素开始被拖拽的时候触发的事件，此事件作用在被拖曳元素上
    //    ondragenter 事件：当拖曳元素进入目标元素的时候触发的事件，此事件作用在目标元素上
    //    ondragover 事件：拖拽元素在目标元素上移动的时候触发的事件，此事件作用在目标元素上
    //    ondrop 事件：被拖拽的元素在目标元素上同时鼠标放开触发的事件，此事件作用在目标元素上
    //    ondragend 事件：当拖拽完成后触发的事件，此事件作用在被拖曳元素上
    //    Event.preventDefault() 方法：阻止默认的些事件方法等执行。在ondragover中一定要执行preventDefault()，否则ondrop事件不会被触发。另外，如果是从其他应用软件或是文件中拖东西进来，尤其是图片的时候，默认的动作是显示这个图片或是相关信息，并不是真的执行drop。此时需要用用document的ondragover事件把它直接干掉。
    //    Event.effectAllowed 属性：就是拖拽的效果。


    dragFunc();

    function dragFunc() {
        var ele;
        document.querySelector('#drag').addEventListener('dragstart', function (e) {
            console.log("dragstart");
            ele = e.target;
            // ele.classList.add('draging');
        })
        document.querySelector('#drag').addEventListener('dragover', function (e) {
            e.preventDefault();
            console.log(e.target.innerText);
            console.log("dragover");
            if (e.target.nodeName === 'P') {
               e.target.parentNode.insertBefore(ele, e.target);
            }
        })
        document.querySelector('#drag').addEventListener('drop', function (e) {
            console.log("drop");
            //  ele.classList.remove('draging');
            if (e.target.nodeName === 'P') {
                //e.target.parentNode.insertBefore(ele, e.target);
            }
        })
    }
</script>
</html>